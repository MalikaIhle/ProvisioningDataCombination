# ProvisioningDataCombination



## compilation_provisioning: extract raw data and give list of errors in the original excel files

give 'Tin' 'Tout' 'Sex' for all files

for old files, also gives comments 'S', 'IN', 'O' with color of 'O' visits

create variables: synchrony, duration dbl attended, duration unattended, duration Mvisit, duration Fvisit, alternation, feeding rate, duration activity around the nest...






## ProvisioningErrorCheck: to standardize file, correct chronology, fill in missing info

### for files with Old Template

I am assuming that 
'O' blue means feeding from the outside
'O' grey means hanging out of the nest box
'S' is hanging out at the nest box before entering it or after leaving it
and therefore I changed files accordingly (specifically files for 2010-2011 with old template)

we corrected all illogical chronology with the videos unless specified (a few missing DVDs)

we removed all comments other than 'O' 'G' 'S' 'IN' to the next empty column or the 'activity' column
and replaced it appropriately (i.e. following the definitions above)

we standardized  all time when bird was 'IN' at begining (Tin = 0) and at the end (Tout = tape length)

the data is contained in the second sheet (create sheet1 otherwise)

#### importantly: we corrected the raw data of each excel files but not their summary. This will be directl corrected in the DB



### for files with New Template

Checked that all Tout were filled in, chronology logical, no comments within the raw data






## LogChangesExcelFiles

all changes made to the original excel files from the dropbox according to the rules above, the queries in ProvisioningErroCheck, and the code in compilation_provisioning, were logged in here.

the original copies were backedup on the HS google drive

all original xls files were converted to xlsx





## R_ files > these are R_table_output

### R_Compare_tblParentalCare

this compare tblParentalCare from the database (which included typos and other mistakes), and the same table generated by my code combination_provisionning.R


### R_Compare_NbChicksDuringRecording

this compare the number of chicks calculated to be alive at time of recording, the number of chicks during a visit on the same day as the recording, and the number of chicks given in tblDVDInfo > nothing is matching, but:
- tblDVDInfo number of chicks is correct for 2004 2005 (Shinichi checked the nest), but death dates are not (indicated as being on the last day seen alive, instead of the day found to be missing)
- tblDVDInfo number of chicks is estimated after that (from previous nest check) but about correct...


### R_RawFeedingVisits

thi is all the raw data with only feeding visits (OF, IN or INorOF), where a succession OF-IN has been merged into one visit (run 20160324)


### R_combinedprovisionningALLforDB

this as all the raw data until time of code run (last: 20160323)
this is the raw data I will do my analyses on, this is also what Ian Stevensson could import into the DB
(historically, it first included files from 2004 to 2014, then 206 missing files from this period, then videos from 2015 from Andrew)
